# 多图层图片合成系统

## 目录
1. [项目概述](#项目概述)
2. [功能特性](#功能特性)
3. [技术实现](#技术实现)
4. [快速开始](#快速开始)
5. [使用说明](#使用说明)
6. [项目结构](#项目结构)

---

## 项目概述
基于原生HTML/CSS/JavaScript实现的图片合成系统，支持多层结构，提供直观的用户界面和丰富的交互功能。系统支持背景、插图、元素和文字的多层叠加，并提供了完整的图层控制功能。

---

## 功能特性

### 1. 图层管理系统
| 图层类型   | 操作方式                  | 素材库                | 特性                    |
|------------|---------------------------|----------------------|-------------------------|
| 背景层     | 素材库选择                | backgrounds/         | 固定尺寸，不可拖动      |
| 插图层     | 素材库点选                | sprites/             | 可拖动，可调整大小      |
| 元素层     | 素材库选择                | elements/            | 可拖动，可调整大小      |
| 文字层     | 文本框输入                | -                    | 可拖动，可自定义字体    |

### 2. 交互功能
- **画布操作**
  - 支持画布缩放（鼠标滚轮）
  - 支持画布平移（拖拽空白区域）
  - 自适应容器大小
- **图层操作**
  - 图层拖拽（鼠标/触摸）
  - 图层选择
  - 图层排序
- **文字编辑**
  - 实时文字输入
  - 字体选择
  - 字号调整
  - 颜色选择

### 3. 素材管理
- 支持SVG格式素材
- 素材预览功能
- 素材选择状态显示
- 分类管理（背景/插图/元素）

---

## 技术实现

### 核心组件
```javascript
class LayerManager {
    // 图层管理
    // 画布渲染
    // 事件处理
    // 字体加载
}
```

### 布局设计
- 采用Flex布局实现左右分栏设计
- 左侧为图层控制面板，右侧为预览画布
- 响应式设计，自适应不同屏幕尺寸
- 可调整左右面板宽度

### 样式特点
- 现代化UI设计，包含圆角、阴影等视觉效果
- 素材库采用网格布局，支持预览和选择
- 交互元素具有hover效果和过渡动画
- 自定义开关和选择器样式

---

## 快速开始

### 环境要求
- 现代浏览器（支持Canvas、SVG、FontFace API）
- 本地服务器环境（用于加载字体文件）

### 启动项目
1. 启动本地服务器：
```bash
python -m http.server 8000
```

2. 在浏览器中访问：
```
http://localhost:8000
```

---

## 使用说明

### 基本操作
1. **选择背景**
   - 从背景素材库中选择合适的背景图片
   - 背景会自动填充整个画布

2. **添加元素**
   - 从元素库中选择SVG图形
   - 点击素材即可添加到画布
   - 拖拽调整位置

3. **添加文字**
   - 在文字输入框中输入内容
   - 选择字体和字号
   - 调整文字颜色
   - 拖拽调整位置

4. **画布操作**
   - 使用鼠标滚轮缩放画布
   - 拖拽空白区域平移画布
   - 拖拽图层调整位置

### 注意事项
1. **素材格式**
   - 背景图片支持SVG格式
   - 插图层和元素层推荐使用SVG格式
   - 确保SVG文件包含正确的视图框设置

2. **字体使用**
   - 支持系统默认字体
   - 支持自定义TTF字体文件
   - 字体文件需放置在assets/fonts目录下

3. **性能优化**
   - 素材采用按需加载
   - 使用事件委托优化交互性能
   - 画布渲染采用分层处理

---

## 项目结构
```
project-root/
├── assets/
│   ├── backgrounds/  # 背景SVG素材
│   ├── elements/     # 元素SVG素材
│   ├── sprites/      # 插图SVG素材
│   └── fonts/        # 自定义字体文件
├── index.html        # 主页面
├── core.js          # 核心逻辑
└── style.css        # 样式文件
```

### 文件说明
- `index.html`: 页面结构和UI组件
- `core.js`: 图层管理、画布渲染、事件处理等核心功能
- `style.css`: 页面样式和动画效果
- `assets/`: 素材资源目录
  - `backgrounds/`: 背景图片
  - `elements/`: 可缩放元素
  - `sprites/`: 插图素材
  - `fonts/`: 自定义字体文件